# Fish 15

## Task Description

The Fish task is an acquired equivalence task, in which training to treat
two stimuli as equivalent should increase generalization between them. The
design is based on that described in Myers et al. (2003). Specifically,
during several training stages, subjects first learn to associate
antecedent stimuli (here, faces) with different consequents (here,
colored fish). Included in the training are several antecedents that
are implicitly equivalent, in the sense of being mapped to the same
consequents.  During a final training stage, some antecedents are
paired with new consequents. The training phase is followed by a testing
stage that interleaves retention trials with previously trained pairs as
well as generalization trials: e.g., given that Face A is mapped to fish X,
and Faces A and B are equivalent, will subjects assume that Face B also
goes with fish X?  Healthy adults reliably show acquired equivalence,
which is disrupted in patients with hippocampal region dysfunction,
including amnesic patients with bilateral hippocampal destruction
(Myers et al., 2008) and non-demented elderly with hippocampal atrophy
consistent with prodromal Alzheimerâ€™s disease (Myers et al., 2003).

## PsychoPy Implementation

The PsychoPy implementation of Fish 15, is a modified version of the Fish 14
implementation (written by Catherine Myers). The implementation is broken
down into the following routines:

![Fish 15 Routine Diagram](../imgs/Fish15Diagram.png)

- Startup:
    - Before Experiment:
        - Generates a file with the face-fishes pairings to be used in the
        current run of the experiment. This file is found in
        `GluckLab/fish15/experimentFiles` and is named
        `face_fish_pairings.csv`. These pairings are randomly generated
        with each run of the experiment.
        - Generates a csv file for each phase of the experiment. These
        files uses the pairings defined in the `face_fish_fish.csv` file
        to generate the stimuli used for each phase.
    - Begin Routine:
        - It creates and writes the header to the experiment's data file
        found in `GluckLab/fish15/data`. This is **not** the data file
        that is automatically generated by PsychoPy, but rather a custom
        one that is made to be identical to Fish 8.1a's data file. The
        data file that is automatically generated by PsychoPy and partially
        modified by the experiment's code (legacy code from Fish 14) can
        be found in `GluckLab/fish15/psychopyOutput`

- Train Instructions:
    - Begin Routine:
        - Shows a screen with the instructions for the training phases of
        the experiment.
        - Initializes data summary variables (acquisition, retention,
        generalization scores, etc.)
        - Initializes variables that are used by Fish 14's legacy code.
        - Writes the header for that face onto the custom data file.

- Run Trial:
    - Begin Routine:
        - Shows a screen with a face and two fishes and prompts the subject
        to choose which fish corresponds to that face.
    - End Routine:
        - Updates the summary variables based on the results of the current
        trial.
        - Records the stimuli and results of this trial onto the custom
        data file.

- DoFBX:
    - Begin Routine:
        - Reveals the correct answer to the subject by showing a circle of
        in the positon of their response, hiding the incorrect choice, and
        showing a text saying either correct or incorrect.
    - End Routine:
        - If the subject's consecutive correct answers have reached the
        criterion value then the current phase is terminated early.

- Next Stage:
    - Begin Routine:
        - Updates the criterion value for the next phase and resets the
        number of consecutive correct answers.
        - Writes the header for the next phase onto the custom data file.

- Test Instructions:
    - Begin Routine:
        - Shows the instructions for the probing/testing phase of the
        experiment (phase 3).
        - Writes the header for the test phase onto the custom data file.

- NoFB:
    - Begin Routine:
        - Shows a circle in the postion of the subject's response (left or
        right). **Does not** reveal the correct answer in any form.
        - Updates variables used by the Fish 14 legacy code.

- Goodbye:
    - Begin Routine:
        - Shows a screen instructing the subject that the experiment has
        ended, along with a tally of their correct responses throughout
        the experiment.
        - Calculates the subject's acquisition, retention, and
        generalization score.  
        - Creates and writes a summary file with all the scores
        and experiment information (subject, experiment, experimenter,
        date, and time). This file can be found in
        `GluckLab/fish15/data/summaries`.

## Phases

On each phase the subject is prompted to choose one of two fishes that
corresponds to the face on screen. Phases 0-2 are training phases.
During the training phases, after the subject chooses a fish, the correct answer is revealed regardless of if the subject was correct or not.
Phase 3 is the probing/testing phase. This phase is almost exactly like the
phases but the correct answers are no longer shown to subject.

There are a total of four fishes. These are randomly grouped into two pairs.
Each face is randomly assigned a pair of fishes at the beginning of the
experiment. The grouping and assignment is randomized everytime the
experiment is run. An example of the face-fish pairings could be the
following:

|Face|Fishes|
|----|----|
|Boy|Green, Purple|
|Woman|Red, Blue|
|Girl|Green, Purple|
|Man|Red, Blue|

We start the experiment by showing the subject only two faces and two
fishes, then each phase increases the number of faces and fishes that
are shown on screen. The following table summarizes the
differences between each phase:

|Phase | Number of Fishes | Number of Faces |
|------|------------------|-----------------|
|0|2|2|
|1|2|4|
|2*|4|4|
|3| 4| 4|

(*Some "critical" face-fishes pairs are not included in phase 2. This is
further explained later in this section)

As it is summarized in the table above, phase 0 has two fishes and two
faces, each fish corresponding to one face. For example:

|Face|Fish|
|----|----|
|Boy|Green|
|Woman|Red|

In phase 1, we increase the number of faces to four but the number of fishes
remains the same. Each fish corresponds two faces. For example:

|Face|Fish|
|----|----|
|Boy|Green|
|Woman|Red|
|Girl|Green|
|Man|Red|

In phase 2, we include all the fishes and all the faces,
however we randomly exclude two pairings that will not be shown to the
subject during training. These are called "**Critical Pairs**", and are used
in phase 3 to test the subject's generalization performance. For example:

|Face|Fishes|
|----|----|
|Boy|Green, Purple|
|Woman|Red, Blue|
|Girl|Green|
|Man|Red|

In this example the (Girl, Purple) and (Man, Blue) pairings are excluded
from this phase, and thus excluded from all training phases. However,
by seeing the other pairings, the subject can
deduce (or *generalize*) that the purple fish corresponds to the girl face
and that the blue fish corresponds to the man face. The subject's
accuracy in these first 3 phases is the subject's "acquisition" score.

Finally, in phase 3 we stop showing the correct answers and use all of the
pairings:

|Face|Fishes|
|----|----|
|Boy|Green, Purple|
|Woman|Red, Blue|
|Girl|Green, Purple|
|Man|Red, Blue|

In this manner, we can test the subject's "retention" (how
accurate the subject's responses are when prompted with a pairing that was
**previously seen**) and "generalization" (how accurate the
subject's responses are when promptes with a pairing **not previously
seen**, i.e., when prompted with a "critical pair").

## Generating Stimuli Files

### Face-Fish Pairings

As metioned in the **Phases** section, first we generate a file
which contains the face-fish pairings that will be referenced to generate
the stimuli files of each phase. These pairings must be generated at
random each time the experiment is run. To do this we make two lists:
one containing all the faces, another containing all the fishes. Then
we generate 4 *distinct* random integers spanning the range $[0, 3]$.
Call these random integers $r_1, r_2, r_3, r_4$. This setup makes it so
that each one of these numbers can be used to reference a unique random
index in both the `faces` and `fishes` list. Then we assign the pairings
in the following way:

|Face| Fish1 | Fish2 |
|----|-------|-------|
|`faces[r1]`|`fishes[r1]`|`fishes[r2]`|
|`faces[r2]`|`fishes[r1]`|`fishes[r2]`|
|`faces[r3]`|`fishes[r3]`|`fishes[r4]`|
|`faces[r4]`|`fishes[r3]`|`fishes[r4]`|

This assures that the pairings are randomized with every run of the
experiment and that every face has another "partner" face which
shares the same pair of fishes. This pairings are written as a CSV
file to `GluckLab/experimentFiles/face_fish_pairings.csv`

### Stimuli Files